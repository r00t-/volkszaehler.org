$.extend({getUrlParams:function(){for(var e={},i=decodeURIComponent(window.location.href).slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<i.length;t++){var n=i[t].split("="),s=n[0],a=n[1];"[]"==s.substr(s.length-2)?(s=s.substr(0,s.length-2),void 0===e[s]&&(e[s]=new Array),e[s].push(a)):e[s]=a}return e},getUrlParam:function(e){return $.getUrlParams()[e]}}),$.extend({setCookie:function(e,i,t){t=t||{},null===i&&(i="",t.expires=-1);var n="";if(t.expires&&("number"==typeof t.expires||t.expires.toUTCString)){var s;"number"==typeof t.expires?(s=new Date,s.setTime(s.getTime()+24*t.expires*60*60*1e3)):s=t.expires,n="; expires="+s.toUTCString()}var a=t.path?"; path="+t.path:"",r=t.domain?"; domain="+t.domain:"",l=t.secure?"; secure":"";document.cookie=e+"="+encodeURIComponent(i)+n+a+r+l},getCookie:function(e){if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),t=0;t<i.length;t++){var n=$.trim(i[t]);if(n.substring(0,e.length+1)==e+"=")return decodeURIComponent(n.substring(e.length+1))}}}),function(e){function i(e){for(var i=[];e=l(e);)i[i.length]=e[0];return i}function t(i){return e(i).siblings("tr."+d.childPrefix+i[0].id)}function n(e){var i=parseInt(e[0].style.paddingLeft,10);return isNaN(i)?o:i}function s(i,a){var r=e(i.children("td")[d.treeColumn]);r[0].style.paddingLeft=n(r)+a+"px",t(i).each(function(){s(e(this),a)})}function a(i){if(!i.hasClass("initialized")){i.addClass("initialized");var s=t(i);if(!i.hasClass("parent")&&s.length>0&&i.addClass("parent"),i.hasClass("parent")){var a=e(i.children("td")[d.treeColumn]),r=n(a)+d.indent;if(s.each(function(){e(this).children("td")[d.treeColumn].style.paddingLeft=r+"px"}),d.expandable){if(a.prepend('<span style="margin-left: -'+d.indent+"px; padding-left: "+d.indent+'px" class="expander"></span>'),e(a[0].firstChild).click(function(){i.toggleBranch()}),d.clickableNodeNames&&(a[0].style.cursor="pointer",e(a).click(function(e){"expander"!=e.target.className&&i.toggleBranch()})),d.persist){var l=d.persistCookiePrefix+i.attr("id");"true"==e.cookie(l)&&i.addClass("expanded")}i.hasClass("expanded")||i.hasClass("collapsed")||i.addClass(d.initialState),i.hasClass("expanded")&&i.expand()}}}}function r(i,n){i.insertAfter(n),t(i).reverse().each(function(){r(e(this),i[0])})}function l(i){for(var t=i[0].className.split(" "),n=0;n<t.length;n++)if(t[n].match(d.childPrefix))return e(i).siblings("#"+t[n].substring(d.childPrefix.length));return null}var d,o;e.fn.treeTable=function(i){return d=e.extend({},e.fn.treeTable.defaults,i),this.each(function(){e(this).addClass("treeTable").find("tbody tr").each(function(){if(!e(this).hasClass("initialized")){var i=-1==e(this)[0].className.search(d.childPrefix);i&&isNaN(o)&&(o=parseInt(e(e(this).children("td")[d.treeColumn]).css("padding-left"),10)),!i&&d.expandable&&"collapsed"==d.initialState&&e(this).addClass("ui-helper-hidden"),(!d.expandable||i)&&a(e(this))}})})},e.fn.treeTable.defaults={childPrefix:"child-of-",clickableNodeNames:!1,expandable:!0,indent:19,initialState:"collapsed",onNodeShow:null,onNodeHide:null,treeColumn:0,persist:!1,persistCookiePrefix:"treeTable_",persistCookieOptions:{}},e.fn.collapse=function(){return e(this).addClass("collapsed"),t(e(this)).each(function(){e(this).hasClass("collapsed")||e(this).collapse(),e(this).addClass("ui-helper-hidden"),e.isFunction(d.onNodeHide)&&d.onNodeHide.call(this)}),this},e.fn.expand=function(){return e(this).removeClass("collapsed").addClass("expanded"),t(e(this)).each(function(){a(e(this)),e(this).is(".expanded.parent")&&e(this).expand(),e(this).removeClass("ui-helper-hidden"),e.isFunction(d.onNodeShow)&&d.onNodeShow.call(this)}),this},e.fn.reveal=function(){return e(i(e(this)).reverse()).each(function(){a(e(this)),e(this).expand().show()}),this},e.fn.appendBranchTo=function(t){var n=e(this),a=l(n),o=e.map(i(e(t)),function(e){return e.id});return-1!=e.inArray(n[0].id,o)||a&&t.id==a[0].id||t.id==n[0].id||(s(n,i(n).length*d.indent*-1),a&&n.removeClass(d.childPrefix+a[0].id),n.addClass(d.childPrefix+t.id),r(n,t),s(n,i(n).length*d.indent)),this},e.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},e.fn.toggleBranch=function(){if(e(this).hasClass("collapsed")?e(this).expand():e(this).removeClass("expanded").collapse(),d.persist){var i=d.persistCookiePrefix+e(this).attr("id");e.cookie(i,e(this).hasClass("expanded")?"true":null,d.persistCookieOptions)}return this}}(jQuery);